{% extends "base.html" %}

{% block title %}Список ассетов — AssetHub{% endblock %}

{% block content %}

<h2>Список ассетов</h2>

<form action="{{ url_for('assets.assets_list') }}" method="get">
    {% if tag_filter %}
        <input type="hidden" name="tag" value="{{ tag_filter }}">
    {% endif %}
    <label>
        Поиск:
        <input type="text" name="q" value="{{ q or '' }}">
    </label>
    <button type="submit">Найти</button>
    {% if q %}
        <a href="{{ url_for('assets.assets_list', tag=tag_filter) }}">Сбросить поиск</a>
    {% endif %}
</form>

{% if tag_filter %}
    <p>
        Фильтр по тегу: <b>{{ tag_filter }}</b>
        (<a href="{{ url_for('assets.assets_list') }}">сбросить все фильтры</a>)
    </p>
{% endif %}

<table border="1" cellpadding="8" cellspacing="0">
    <thead>
    <tr>
        <th>ID</th>
        <th>Название</th>
        <th>Тип</th>
        <th>Проект</th>
        <th>Автор</th>
        <th>Создан</th>
    </tr>
    </thead>
    <tbody>
    {% for asset in assets %}
        <tr>
            <td>{{ asset.id }}</td>
            <td>
                <a href="{{ url_for('assets.asset_detail', asset_id=asset.id) }}">
                    {{ asset.title }}
                </a>
            </td>
            <td>{{ asset.asset_type }}</td>
            <td>{{ asset.project_name or "—" }}</td>
            <td>{{ asset.author_name or "—" }}</td>
            <td>
                {% if asset.created_at %}
                    {{ asset.created_at.strftime("%Y-%m-%d %H:%M") }}
                {% else %}
                    —
                {% endif %}
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="6">Ассеты пока не добавлены.</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}


